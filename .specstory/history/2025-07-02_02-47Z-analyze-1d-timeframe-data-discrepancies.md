<!-- Generated by SpecStory -->

# Analyze 1d timeframe data discrepancies (2025-07-02 02:47Z)

_**User**_

For confirmation, 24h and 1d is supposed to be the same timeframe,  Something seems inaccurate with the 1d timeframe, analyze the data flow to identify anything that could be causing it, for the timeframes 1d 1m 1y and all (focus on 1d 1m and 1w for now) the line graph seems to be way too straight then drops slightly, it isnt fluculating, use these xcode bild logs to see what data  and values are being rendered and causing it, ensure when updaing components you update all correspondijng components to relfect the implementations  
Running application UIReplicationLedger ({
    initialProps =     {
    };
    rootTag = 1;
})
ViewPropTypes will be removed from React Native, along with all other PropTypes. We recommend that you migrate away from PropTypes and switch to a type system like TypeScript. If you need to continue using ViewPropTypes, migrate to the 'deprecated-react-native-prop-types' package.
Unbalanced calls start/end for tag 19
Running "UIReplicationLedger
[PriceService] Cache cleared
[PriceService] Initialized with cleared cache for realistic fallback data
'AssetsListView rendering with assets:', 2, 'estimated height:', 160
[GraphCard] Loading real portfolio data for 1w
[calculatePortfolioHistory] Generating REAL historical data for range: 1w
[PriceService] Fetching portfolio historical data for 1w
[PriceService] Fetching 1w historical data for bitcoin from coingecko
[PriceService] Fetching 1w historical data for solana from coingecko
[calculatePortfolioChange] Calculating REAL portfolio change for 1w
[PriceService] Fetching prices from coingecko
[calculatePortfolioBalance] Calculating current portfolio balance with live prices
[PriceService] Deduplicating request for live-prices
[AssetRowLayout] Using static data for bitcoin - not supported or loading
[AssetRowLayout] Using static data for solana - not supported or loading
[PriceContext] Fetching prices...
[PriceService] Deduplicating request for live-prices
[PriceContext] Started price refresh interval: 60000ms
Unrecognized font family 'Inter-Medium'
Unrecognized font family 'Inter-Medium'
Unrecognized font family 'Inter-Medium'
Unrecognized font family 'Inter-Medium'
Unrecognized font family 'Inter-Medium'
Unrecognized font family 'Inter-Medium'
Unrecognized font family 'Inter-Medium'
Unrecognized font family 'Inter-Medium'
Unrecognized font family 'Inter-Medium'
Unrecognized font family 'Inter-Medium'
Unrecognized font family 'Inter-Medium'
Unrecognized font family 'Inter-Medium'
Unrecognized font family 'Inter-Medium'
'AssetsListView layout:', { width: 361, height: 160, totalHeight: 160, assetsCount: 2 }
[PriceService] Successfully fetched 8 historical points from coingecko
[PriceService] Successfully fetched 8 historical points from coingecko
[PriceService] Generated 9 portfolio history points
[calculatePortfolioHistory] Generated 9 REAL historical points for 1w
[calculatePortfolioHistory] Value range: 9738294.939897116 - 10011220.340230007
[PriceService] Successfully fetched prices from coingecko
'[PriceContext] Prices updated:', { bitcoin: 
   { id: 'bitcoin',
     usd: 105683,
     usd_24h_change: -1.4626114663135281,
     last_updated_at: 1751424369 },
  solana: 
   { id: 'solana',
     usd: 148.16,
     usd_24h_change: -3.5944255512347247,
     last_updated_at: 1751424369 } }
[calculatePortfolioBalance] bitcoin: 8352060000 -> $8826707.57
[PriceService] Using cached prices
[PriceService] Using cached historical data for bitcoin 1w
'[PriceService] 1w change for bitcoin:', { amount: 83.5206,
  priceStart: 107238.53045016268,
  priceEnd: 105685.43322311842,
  valueChange: -129715.61226107282,
  changePercent: -1.4482641831482725 }
'[calculatePortfolioChange] 1w change for bitcoin:', { currentValue: 8826707.5698,
  valueChange: -129715.61226107282,
  percentage: -0.014482641831482726 }
[PriceService] Using cached prices
[calculatePortfolioBalance] solana: 6247570000000 -> $925639.97
[calculatePortfolioBalance] Total portfolio balance: $9752347.54
[PriceService] Using cached historical data for solana 1w
'[PriceService] 1w change for solana:', { amount: 6247.57,
  priceStart: 143.37011953879949,
  priceEnd: 148.16569263531747,
  valueChange: 29960.678610612835,
  changePercent: 3.344890212789548 }
'[calculatePortfolioChange] 1w change for solana:', { currentValue: 925639.9712,
  valueChange: 29960.678610612835,
  percentage: 0.03344890212789548 }
'[calculatePortfolioChange] Total 1w change:', { totalCurrentValue: 9752347.541,
  totalChange: -99754.93365045998,
  changePercentage: -0.010228812419889537 }
[calculatePortfolioBalance] Calculating current portfolio balance with live prices
[PriceService] Using cached prices
'[AssetRowLayout] Calculating 1w change for bitcoin:', { balance: 8352060000, timeframe: '1w' }
'[PriceContext] Getting 1w value change for bitcoin:', { amount: 8352060000, timeframe: '1w', magnitude: 8 }
[PriceService] Using cached historical data for bitcoin 1w
'[AssetRowLayout] Calculating 1w change for solana:', { balance: 6247570000000, timeframe: '1w' }
'[PriceContext] Getting 1w value change for solana:', { amount: 6247570000000, timeframe: '1w', magnitude: 9 }
[PriceService] Using cached historical data for solana 1w
'[GraphCard] Loaded real data:', { historyPoints: 9,
  currentBalance: 9752347.541,
  change: { value: -99754.93365045998, percentage: -0.010228812419889537 } }
'[PriceService] 1w change for bitcoin:', { amount: 83.5206,
  priceStart: 107238.53045016268,
  priceEnd: 105685.43322311842,
  valueChange: -129715.61226107282,
  changePercent: -1.4482641831482725 }
'[PriceService] 1w change for solana:', { amount: 6247.57,
  priceStart: 143.37011953879949,
  priceEnd: 148.16569263531747,
  valueChange: 29960.678610612835,
  changePercent: 3.344890212789548 }
[calculatePortfolioBalance] bitcoin: 8352060000 -> $8826707.57
[PriceService] Using cached prices
'[AssetRowLayout] 1w change result for bitcoin:', { value: -129715.61226107282,
  percentage: -0.014482641831482726,
  absoluteValue: 129715.61226107282,
  priceStart: 107238.53045016268,
  priceEnd: 105685.43322311842 }
'[AssetRowLayout] 1w change result for solana:', { value: 29960.678610612835,
  percentage: 0.03344890212789548,
  absoluteValue: 29960.678610612835,
  priceStart: 143.37011953879949,
  priceEnd: 148.16569263531747 }
[calculatePortfolioBalance] solana: 6247570000000 -> $925639.97
[calculatePortfolioBalance] Total portfolio balance: $9752347.54
Unrecognized font family 'Inter-Medium'
[GESTURE HANDLER] Initialize gesture handler for view <RCTRootContentView: 0x10273b610; frame = (0 0; 393 852); gestureRecognizers = <NSArray: 0x13e2e05a0>; layer = <CALayer: 0x13e2de840>> reactTag: 1; frame = {{0, 0}, {393, 852}}; layer = <CALayer: 0x13e2de840>
'[PriceContext] bitcoin calculation:', { amount: 8352060000,
  adjustedAmount: 83.5206,
  price: 105683,
  fiatValue: 8826707.5698 }
'[PriceContext] solana calculation:', { amount: 6247570000000,
  adjustedAmount: 6247.57,
  price: 148.16,
  fiatValue: 925639.9712 }
Unrecognized font family 'Inter-Medium'
Unrecognized font family 'Inter-Medium'
'[GraphCard] Time range clicked:', '1D', '1d'
[PriceContext] Timeframe changed from 1w to 1d
'[PriceContext] bitcoin calculation:', { amount: 8352060000,
  adjustedAmount: 83.5206,
  price: 105683,
  fiatValue: 8826707.5698 }
'[PriceContext] solana calculation:', { amount: 6247570000000,
  adjustedAmount: 6247.57,
  price: 148.16,
  fiatValue: 925639.9712 }
[GraphCard] Loading real portfolio data for 1d
[calculatePortfolioHistory] Generating REAL historical data for range: 1d
[PriceService] Fetching portfolio historical data for 1d
[PriceService] Fetching 1d historical data for bitcoin from coingecko
[PriceService] Fetching 1d historical data for solana from coingecko
[calculatePortfolioChange] Calculating REAL portfolio change for 1d
[PriceService] Using cached prices
[calculatePortfolioBalance] Calculating current portfolio balance with live prices
[PriceService] Using cached prices
'[AssetRowLayout] Calculating 1d change for bitcoin:', { balance: 8352060000, timeframe: '1d' }
'[PriceContext] Getting 1d value change for bitcoin:', { amount: 8352060000, timeframe: '1d', magnitude: 8 }
[PriceService] Using cached prices
'[AssetRowLayout] Calculating 1d change for solana:', { balance: 6247570000000, timeframe: '1d' }
'[PriceContext] Getting 1d value change for solana:', { amount: 6247570000000, timeframe: '1d', magnitude: 9 }
[PriceService] Using cached prices
[PriceService] Using cached prices
[calculatePortfolioBalance] bitcoin: 8352060000 -> $8826707.57
[PriceService] Using cached prices
'[AssetRowLayout] 1d change result for bitcoin:', { value: -131016.70232484775,
  percentage: -0.014626114663135282,
  absoluteValue: 131016.70232484775,
  priceStart: 107251.6753007623,
  priceEnd: 105683 }
'[AssetRowLayout] 1d change result for solana:', { value: -34511.945836634826,
  percentage: -0.03594425551234725,
  absoluteValue: 34511.945836634826,
  priceStart: 153.684059088035,
  priceEnd: 148.16 }
'[calculatePortfolioChange] 1d change for bitcoin:', { currentValue: 8826707.5698,
  valueChange: -131016.70232484775,
  percentage: -0.014626114663135282 }
[PriceService] Using cached prices
[calculatePortfolioBalance] solana: 6247570000000 -> $925639.97
[calculatePortfolioBalance] Total portfolio balance: $9752347.54
[PriceService] Using cached prices
'[calculatePortfolioChange] 1d change for solana:', { currentValue: 925639.9712,
  valueChange: -34511.945836634826,
  percentage: -0.03594425551234725 }
'[calculatePortfolioChange] Total 1d change:', { totalCurrentValue: 9752347.541,
  totalChange: -165528.6481614826,
  changePercentage: -0.016973210549109427 }
'[PriceService] coingecko historical data failed:', [Error: CoinGecko historical API error: 401]
[PriceService] coingecko backing off for 1 minutes after failure: CoinGecko historical API error: 401
[PriceService] Fetching 1d historical data for bitcoin from coinmarketcap
'[PriceService] coinmarketcap historical data failed:', [Error: CoinMarketCap requires API key configuration]
[PriceService] coinmarketcap backing off for 1 minutes after failure: CoinMarketCap requires API key configuration
[PriceService] Fetching 1d historical data for bitcoin from binance
'[PriceService] coingecko historical data failed:', [Error: CoinGecko historical API error: 401]
[PriceService] coingecko backing off for 2 minutes after failure: CoinGecko historical API error: 401
[PriceService] Fetching 1d historical data for solana from coinmarketcap
'[PriceService] coinmarketcap historical data failed:', [Error: CoinMarketCap requires API key configuration]
[PriceService] coinmarketcap backing off for 2 minutes after failure: CoinMarketCap requires API key configuration
[PriceService] Fetching 1d historical data for solana from binance
'[PriceService] binance historical data failed:', [Error: Binance historical API error: 451]
[PriceService] binance backing off for 1 minutes after failure: Binance historical API error: 451
[PriceService] All providers failed for solana 1d, generating fallback data
[PriceService] Using cached prices
[PriceService] Generating fallback historical data for solana 1d at price 148.16
[PriceService] Generated 24 fallback points for solana 1d
[PriceService] Price range: 140.75 - 155.1
'[PriceService] binance historical data failed:', [Error: Binance historical API error: 451]
[PriceService] binance backing off for 2 minutes after failure: Binance historical API error: 451
[PriceService] All providers failed for bitcoin 1d, generating fallback data
[PriceService] Using cached prices
[PriceService] Generating fallback historical data for bitcoin 1d at price 105683
[PriceService] Generated 24 fallback points for bitcoin 1d
[PriceService] Price range: 100398.85 - 110507.5
[PriceService] Generated 48 portfolio history points
[calculatePortfolioHistory] Generated 48 REAL historical points for 1d
[calculatePortfolioHistory] Value range: 9264717.668809999 - 10198650.811500002
'[GraphCard] Loaded real data:', { historyPoints: 48,
  currentBalance: 9752347.541,
  change: { value: -165528.6481614826, percentage: -0.016973210549109427 } }
Unrecognized font family 'Inter-Medium'
'[GraphCard] Time range clicked:', '1M', '1m'
[PriceContext] Timeframe changed from 1d to 1m
'[PriceContext] bitcoin calculation:', { amount: 8352060000,
  adjustedAmount: 83.5206,
  price: 105683,
  fiatValue: 8826707.5698 }
'[PriceContext] solana calculation:', { amount: 6247570000000,
  adjustedAmount: 6247.57,
  price: 148.16,
  fiatValue: 925639.9712 }
[GraphCard] Loading real portfolio data for 1m
[calculatePortfolioHistory] Generating REAL historical data for range: 1m
[PriceService] Fetching portfolio historical data for 1m
[PriceService] All providers failed for bitcoin 1m, generating fallback data
[PriceService] Using cached prices
[PriceService] All providers failed for solana 1m, generating fallback data
[PriceService] Using cached prices
[calculatePortfolioChange] Calculating REAL portfolio change for 1m
[PriceService] Using cached prices
[calculatePortfolioBalance] Calculating current portfolio balance with live prices
[PriceService] Using cached prices
'[AssetRowLayout] Calculating 1m change for bitcoin:', { balance: 8352060000, timeframe: '1m' }
'[PriceContext] Getting 1m value change for bitcoin:', { amount: 8352060000, timeframe: '1m', magnitude: 8 }
[PriceService] Deduplicating request for historical-bitcoin-1m
'[AssetRowLayout] Calculating 1m change for solana:', { balance: 6247570000000, timeframe: '1m' }
'[PriceContext] Getting 1m value change for solana:', { amount: 6247570000000, timeframe: '1m', magnitude: 9 }
[PriceService] Deduplicating request for historical-solana-1m
[PriceService] Generating fallback historical data for bitcoin 1m at price 105683
[PriceService] Generated 30 fallback points for bitcoin 1m
[PriceService] Price range: 73978.1 - 133383.27
[PriceService] Generating fallback historical data for solana 1m at price 148.16
[PriceService] Generated 30 fallback points for solana 1m
[PriceService] Price range: 103.73 - 187.18
'[PriceService] 1m change for bitcoin:', { amount: 83.5206,
  priceStart: 73978.1,
  priceEnd: 105683,
  valueChange: 2648012.27094,
  changePercent: 42.857142857142854 }
'[PriceService] 1m change for solana:', { amount: 6247.57,
  priceStart: 103.73,
  priceEnd: 148.16,
  valueChange: 277579.5351,
  changePercent: 42.83235322471802 }
[PriceService] Using cached historical data for bitcoin 1m
[calculatePortfolioBalance] bitcoin: 8352060000 -> $8826707.57
[PriceService] Using cached prices
'[AssetRowLayout] 1m change result for bitcoin:', { value: 2648012.27094,
  percentage: 0.42857142857142855,
  absoluteValue: 2648012.27094,
  priceStart: 73978.1,
  priceEnd: 105683 }
[PriceService] Generated 30 portfolio history points
'[AssetRowLayout] 1m change result for solana:', { value: 277579.5351,
  percentage: 0.42832353224718017,
  absoluteValue: 277579.5351,
  priceStart: 103.73,
  priceEnd: 148.16 }
'[PriceService] 1m change for bitcoin:', { amount: 83.5206,
  priceStart: 73978.1,
  priceEnd: 105683,
  valueChange: 2648012.27094,
  changePercent: 42.857142857142854 }
[calculatePortfolioHistory] Generated 30 REAL historical points for 1m
[calculatePortfolioHistory] Value range: 6826755.734960001 - 12309670.892962
'[calculatePortfolioChange] 1m change for bitcoin:', { currentValue: 8826707.5698,
  valueChange: 2648012.27094,
  percentage: 0.42857142857142855 }
[PriceService] Using cached prices
[calculatePortfolioBalance] solana: 6247570000000 -> $925639.97
[calculatePortfolioBalance] Total portfolio balance: $9752347.54
[PriceService] Using cached historical data for solana 1m
'[PriceService] 1m change for solana:', { amount: 6247.57,
  priceStart: 103.73,
  priceEnd: 148.16,
  valueChange: 277579.5351,
  changePercent: 42.83235322471802 }
'[calculatePortfolioChange] 1m change for solana:', { currentValue: 925639.9712,
  valueChange: 277579.5351,
  percentage: 0.42832353224718017 }
'[calculatePortfolioChange] Total 1m change:', { totalCurrentValue: 9752347.541,
  totalChange: 2925591.80604,
  changePercentage: 0.29998846880102176 }
'[GraphCard] Loaded real data:', { historyPoints: 30,
  currentBalance: 9752347.541,
  change: { value: 2925591.80604, percentage: 0.29998846880102176 } }
Unrecognized font family 'Inter-Medium'
'[GraphCard] Time range clicked:', '1Y', '1y'
[PriceContext] Timeframe changed from 1m to 1y
'[PriceContext] bitcoin calculation:', { amount: 8352060000,
  adjustedAmount: 83.5206,
  price: 105683,
  fiatValue: 8826707.5698 }
'[PriceContext] solana calculation:', { amount: 6247570000000,
  adjustedAmount: 6247.57,
  price: 148.16,
  fiatValue: 925639.9712 }
[GraphCard] Loading real portfolio data for 1y
[calculatePortfolioHistory] Generating REAL historical data for range: 1y
[PriceService] Fetching portfolio historical data for 1y
[PriceService] All providers failed for bitcoin 1y, generating fallback data
[PriceService] Using cached prices
[PriceService] All providers failed for solana 1y, generating fallback data
[PriceService] Using cached prices
[calculatePortfolioChange] Calculating REAL portfolio change for 1y
[PriceService] Using cached prices
[calculatePortfolioBalance] Calculating current portfolio balance with live prices
[PriceService] Using cached prices
'[AssetRowLayout] Calculating 1y change for bitcoin:', { balance: 8352060000, timeframe: '1y' }
'[PriceContext] Getting 1y value change for bitcoin:', { amount: 8352060000, timeframe: '1y', magnitude: 8 }
[PriceService] Deduplicating request for historical-bitcoin-1y
'[AssetRowLayout] Calculating 1y change for solana:', { balance: 6247570000000, timeframe: '1y' }
'[PriceContext] Getting 1y value change for solana:', { amount: 6247570000000, timeframe: '1y', magnitude: 9 }
[PriceService] Deduplicating request for historical-solana-1y
[PriceService] Generating fallback historical data for bitcoin 1y at price 105683
[PriceService] Generated 365 fallback points for bitcoin 1y
[PriceService] Price range: 31724.72 - 209709
[PriceService] Generating fallback historical data for solana 1y at price 148.16
[PriceService] Generated 365 fallback points for solana 1y
[PriceService] Price range: 44.67 - 293.11
'[PriceService] 1y change for bitcoin:', { amount: 83.5206,
  priceStart: 31724.72,
  priceEnd: 105683,
  valueChange: 6177039.920568,
  changePercent: 233.1250835310761 }
'[PriceService] 1y change for solana:', { amount: 6247.57,
  priceStart: 44.67,
  priceEnd: 148.16,
  valueChange: 646561.0193,
  changePercent: 231.67674054175063 }
[PriceService] Using cached historical data for bitcoin 1y
[calculatePortfolioBalance] bitcoin: 8352060000 -> $8826707.57
[PriceService] Using cached prices
'[AssetRowLayout] 1y change result for bitcoin:', { value: 6177039.920568,
  percentage: 2.331250835310761,
  absoluteValue: 6177039.920568,
  priceStart: 31724.72,
  priceEnd: 105683 }
[PriceService] Generated 365 portfolio history points
'[AssetRowLayout] 1y change result for solana:', { value: 646561.0193,
  percentage: 2.3167674054175063,
  absoluteValue: 646561.0193,
  priceStart: 44.67,
  priceEnd: 148.16 }
'[PriceService] 1y change for bitcoin:', { amount: 83.5206,
  priceStart: 31724.72,
  priceEnd: 105683,
  valueChange: 6177039.920568,
  changePercent: 233.1250835310761 }
[calculatePortfolioHistory] Generated 365 REAL historical points for 1y
[calculatePortfolioHistory] Value range: 2928746.601132 - 19346246.748099998
'[calculatePortfolioChange] 1y change for bitcoin:', { currentValue: 8826707.5698,
  valueChange: 6177039.920568,
  percentage: 2.331250835310761 }
[PriceService] Using cached prices
[calculatePortfolioBalance] solana: 6247570000000 -> $925639.97
[calculatePortfolioBalance] Total portfolio balance: $9752347.54
[PriceService] Using cached historical data for solana 1y
'[PriceService] 1y change for solana:', { amount: 6247.57,
  priceStart: 44.67,
  priceEnd: 148.16,
  valueChange: 646561.0193,
  changePercent: 231.67674054175063 }
'[calculatePortfolioChange] 1y change for solana:', { currentValue: 925639.9712,
  valueChange: 646561.0193,
  percentage: 2.3167674054175063 }
'[calculatePortfolioChange] Total 1y change:', { totalCurrentValue: 9752347.541,
  totalChange: 6823600.939868,
  changePercentage: 0.6996880403595945 }
'[GraphCard] Loaded real data:', { historyPoints: 365,
  currentBalance: 9752347.541,
  change: { value: 6823600.939868, percentage: 0.6996880403595945 } }
Unrecognized font family 'Inter-Medium'
'[GraphCard] Time range clicked:', 'ALL', 'all'
[PriceContext] Timeframe changed from 1y to all
'[PriceContext] bitcoin calculation:', { amount: 8352060000,
  adjustedAmount: 83.5206,
  price: 105683,
  fiatValue: 8826707.5698 }
'[PriceContext] solana calculation:', { amount: 6247570000000,
  adjustedAmount: 6247.57,
  price: 148.16,
  fiatValue: 925639.9712 }
[GraphCard] Loading real portfolio data for all
[calculatePortfolioHistory] Generating REAL historical data for range: all
[PriceService] Fetching portfolio historical data for all
[PriceService] All providers failed for bitcoin all, generating fallback data
[PriceService] Using cached prices
[PriceService] All providers failed for solana all, generating fallback data
[PriceService] Using cached prices
[calculatePortfolioChange] Calculating REAL portfolio change for all
[PriceService] Using cached prices
[calculatePortfolioBalance] Calculating current portfolio balance with live prices
[PriceService] Using cached prices
'[AssetRowLayout] Calculating all change for bitcoin:', { balance: 8352060000, timeframe: 'all' }
'[PriceContext] Getting all value change for bitcoin:', { amount: 8352060000, timeframe: 'all', magnitude: 8 }
[PriceService] Deduplicating request for historical-bitcoin-all
'[AssetRowLayout] Calculating all change for solana:', { balance: 6247570000000, timeframe: 'all' }
'[PriceContext] Getting all value change for solana:', { amount: 6247570000000, timeframe: 'all', magnitude: 9 }
[PriceService] Deduplicating request for historical-solana-all
[PriceService] Generating fallback historical data for bitcoin all at price 105683
[PriceService] Generated 365 fallback points for bitcoin all
[PriceService] Price range: 15852.45 - 313201.7
[PriceService] Generating fallback historical data for solana all at price 148.16
[PriceService] Generated 365 fallback points for solana all
[PriceService] Price range: 22.22 - 440.59
'[PriceService] all change for bitcoin:', { amount: 83.5206,
  priceStart: 15852.45,
  priceEnd: 105683,
  valueChange: 7502701.43433,
  changePercent: 566.6666666666667 }
'[PriceService] all change for solana:', { amount: 6247.57,
  priceStart: 22.22,
  priceEnd: 148.16,
  valueChange: 786818.9658,
  changePercent: 566.7866786678668 }
[PriceService] Using cached historical data for bitcoin all
[calculatePortfolioBalance] bitcoin: 8352060000 -> $8826707.57
[PriceService] Using cached prices
'[AssetRowLayout] all change result for bitcoin:', { value: 7502701.43433,
  percentage: 5.666666666666667,
  absoluteValue: 7502701.43433,
  priceStart: 15852.45,
  priceEnd: 105683 }
[PriceService] Generated 730 portfolio history points
'[AssetRowLayout] all change result for solana:', { value: 786818.9658,
  percentage: 5.667866786678668,
  absoluteValue: 786818.9658,
  priceStart: 22.22,
  priceEnd: 148.16 }
'[PriceService] all change for bitcoin:', { amount: 83.5206,
  priceStart: 15852.45,
  priceEnd: 105683,
  valueChange: 7502701.43433,
  changePercent: 566.6666666666667 }
[calculatePortfolioHistory] Generated 730 REAL historical points for all
[calculatePortfolioHistory] Value range: 1462827.14087 - 28911410.77132
'[calculatePortfolioChange] all change for bitcoin:', { currentValue: 8826707.5698,
  valueChange: 7502701.43433,
  percentage: 5.666666666666667 }
[PriceService] Using cached prices
[calculatePortfolioBalance] solana: 6247570000000 -> $925639.97
[calculatePortfolioBalance] Total portfolio balance: $9752347.54
[PriceService] Using cached historical data for solana all
'[PriceService] all change for solana:', { amount: 6247.57,
  priceStart: 22.22,
  priceEnd: 148.16,
  valueChange: 786818.9658,
  changePercent: 566.7866786678668 }
'[calculatePortfolioChange] all change for solana:', { currentValue: 925639.9712,
  valueChange: 786818.9658,
  percentage: 5.667866786678668 }
'[calculatePortfolioChange] Total all change:', { totalCurrentValue: 9752347.541,
  totalChange: 8289520.40013,
  changePercentage: 0.8500025624886618 }
'[GraphCard] Loaded real data:', { historyPoints: 730,
  currentBalance: 9752347.541,
  change: { value: 8289520.40013, percentage: 0.8500025624886618 } }
Unrecognized font family 'Inter-Medium'
'[GraphCard] Time range clicked:', '1M', '1m'
[PriceContext] Timeframe changed from all to 1m
'[PriceContext] bitcoin calculation:', { amount: 8352060000,
  adjustedAmount: 83.5206,
  price: 105683,
  fiatValue: 8826707.5698 }
'[PriceContext] solana calculation:', { amount: 6247570000000,
  adjustedAmount: 6247.57,
  price: 148.16,
  fiatValue: 925639.9712 }
[GraphCard] Loading real portfolio data for 1m
[calculatePortfolioHistory] Generating REAL historical data for range: 1m
[PriceService] Fetching portfolio historical data for 1m
[PriceService] Using cached historical data for bitcoin 1m
[PriceService] Using cached historical data for solana 1m
[calculatePortfolioChange] Calculating REAL portfolio change for 1m
[PriceService] Using cached prices
[calculatePortfolioBalance] Calculating current portfolio balance with live prices
[PriceService] Using cached prices
'[AssetRowLayout] Calculating 1m change for bitcoin:', { balance: 8352060000, timeframe: '1m' }
'[PriceContext] Getting 1m value change for bitcoin:', { amount: 8352060000, timeframe: '1m', magnitude: 8 }
[PriceService] Using cached historical data for bitcoin 1m
'[AssetRowLayout] Calculating 1m change for solana:', { balance: 6247570000000, timeframe: '1m' }
'[PriceContext] Getting 1m value change for solana:', { amount: 6247570000000, timeframe: '1m', magnitude: 9 }
[PriceService] Using cached historical data for solana 1m
[PriceService] Generated 30 portfolio history points
'[PriceService] 1m change for bitcoin:', { amount: 83.5206,
  priceStart: 73978.1,
  priceEnd: 105683,
  valueChange: 2648012.27094,
  changePercent: 42.857142857142854 }
'[PriceService] 1m change for solana:', { amount: 6247.57,
  priceStart: 103.73,
  priceEnd: 148.16,
  valueChange: 277579.5351,
  changePercent: 42.83235322471802 }
[calculatePortfolioHistory] Generated 30 REAL historical points for 1m
[calculatePortfolioHistory] Value range: 6826755.734960001 - 12309670.892962
[PriceService] Using cached historical data for bitcoin 1m
[calculatePortfolioBalance] bitcoin: 8352060000 -> $8826707.57
[PriceService] Using cached prices
'[AssetRowLayout] 1m change result for bitcoin:', { value: 2648012.27094,
  percentage: 0.42857142857142855,
  absoluteValue: 2648012.27094,
  priceStart: 73978.1,
  priceEnd: 105683 }
'[AssetRowLayout] 1m change result for solana:', { value: 277579.5351,
  percentage: 0.42832353224718017,
  absoluteValue: 277579.5351,
  priceStart: 103.73,
  priceEnd: 148.16 }
'[PriceService] 1m change for bitcoin:', { amount: 83.5206,
  priceStart: 73978.1,
  priceEnd: 105683,
  valueChange: 2648012.27094,
  changePercent: 42.857142857142854 }
'[calculatePortfolioChange] 1m change for bitcoin:', { currentValue: 8826707.5698,
  valueChange: 2648012.27094,
  percentage: 0.42857142857142855 }
[PriceService] Using cached prices
[calculatePortfolioBalance] solana: 6247570000000 -> $925639.97
[calculatePortfolioBalance] Total portfolio balance: $9752347.54
[PriceService] Using cached historical data for solana 1m
'[PriceService] 1m change for solana:', { amount: 6247.57,
  priceStart: 103.73,
  priceEnd: 148.16,
  valueChange: 277579.5351,
  changePercent: 42.83235322471802 }
'[calculatePortfolioChange] 1m change for solana:', { currentValue: 925639.9712,
  valueChange: 277579.5351,
  percentage: 0.42832353224718017 }
'[calculatePortfolioChange] Total 1m change:', { totalCurrentValue: 9752347.541,
  totalChange: 2925591.80604,
  changePercentage: 0.29998846880102176 }
'[GraphCard] Loaded real data:', { historyPoints: 30,
  currentBalance: 9752347.541,
  change: { value: 2925591.80604, percentage: 0.29998846880102176 } }
Unrecognized font family 'Inter-Medium'
'[GraphCard] Time range clicked:', '1W', '1w'
[PriceContext] Timeframe changed from 1m to 1w
'[PriceContext] bitcoin calculation:', { amount: 8352060000,
  adjustedAmount: 83.5206,
  price: 105683,
  fiatValue: 8826707.5698 }
'[PriceContext] solana calculation:', { amount: 6247570000000,
  adjustedAmount: 6247.57,
  price: 148.16,
  fiatValue: 925639.9712 }
[GraphCard] Loading real portfolio data for 1w
[calculatePortfolioHistory] Generating REAL historical data for range: 1w
[PriceService] Fetching portfolio historical data for 1w
[PriceService] Using cached historical data for bitcoin 1w
[PriceService] Using cached historical data for solana 1w
[calculatePortfolioChange] Calculating REAL portfolio change for 1w
[PriceService] Using cached prices
[calculatePortfolioBalance] Calculating current portfolio balance with live prices
[PriceService] Using cached prices
'[AssetRowLayout] Calculating 1w change for bitcoin:', { balance: 8352060000, timeframe: '1w' }
'[PriceContext] Getting 1w value change for bitcoin:', { amount: 8352060000, timeframe: '1w', magnitude: 8 }
[PriceService] Using cached historical data for bitcoin 1w
'[AssetRowLayout] Calculating 1w change for solana:', { balance: 6247570000000, timeframe: '1w' }
'[PriceContext] Getting 1w value change for solana:', { amount: 6247570000000, timeframe: '1w', magnitude: 9 }
[PriceService] Using cached historical data for solana 1w
[PriceService] Generated 9 portfolio history points
'[PriceService] 1w change for bitcoin:', { amount: 83.5206,
  priceStart: 107238.53045016268,
  priceEnd: 105685.43322311842,
  valueChange: -129715.61226107282,
  changePercent: -1.4482641831482725 }
'[PriceService] 1w change for solana:', { amount: 6247.57,
  priceStart: 143.37011953879949,
  priceEnd: 148.16569263531747,
  valueChange: 29960.678610612835,
  changePercent: 3.344890212789548 }
[calculatePortfolioHistory] Generated 9 REAL historical points for 1w
[calculatePortfolioHistory] Value range: 9738294.939897116 - 10011220.340230007
[PriceService] Using cached historical data for bitcoin 1w
[calculatePortfolioBalance] bitcoin: 8352060000 -> $8826707.57
[PriceService] Using cached prices
'[AssetRowLayout] 1w change result for bitcoin:', { value: -129715.61226107282,
  percentage: -0.014482641831482726,
  absoluteValue: 129715.61226107282,
  priceStart: 107238.53045016268,
  priceEnd: 105685.43322311842 }
'[AssetRowLayout] 1w change result for solana:', { value: 29960.678610612835,
  percentage: 0.03344890212789548,
  absoluteValue: 29960.678610612835,
  priceStart: 143.37011953879949,
  priceEnd: 148.16569263531747 }
'[PriceService] 1w change for bitcoin:', { amount: 83.5206,
  priceStart: 107238.53045016268,
  priceEnd: 105685.43322311842,
  valueChange: -129715.61226107282,
  changePercent: -1.4482641831482725 }
'[calculatePortfolioChange] 1w change for bitcoin:', { currentValue: 8826707.5698,
  valueChange: -129715.61226107282,
  percentage: -0.014482641831482726 }
[PriceService] Using cached prices
[calculatePortfolioBalance] solana: 6247570000000 -> $925639.97
[calculatePortfolioBalance] Total portfolio balance: $9752347.54
[PriceService] Using cached historical data for solana 1w
'[PriceService] 1w change for solana:', { amount: 6247.57,
  priceStart: 143.37011953879949,
  priceEnd: 148.16569263531747,
  valueChange: 29960.678610612835,
  changePercent: 3.344890212789548 }
'[calculatePortfolioChange] 1w change for solana:', { currentValue: 925639.9712,
  valueChange: 29960.678610612835,
  percentage: 0.03344890212789548 }
'[calculatePortfolioChange] Total 1w change:', { totalCurrentValue: 9752347.541,
  totalChange: -99754.93365045998,
  changePercentage: -0.010228812419889537 }
'[GraphCard] Loaded real data:', { historyPoints: 9,
  currentBalance: 9752347.541,
  change: { value: -99754.93365045998, percentage: -0.010228812419889537 } }
Unrecognized font family 'Inter-Medium'
'[GraphCard] Time range clicked:', '1D', '1d'
[PriceContext] Timeframe changed from 1w to 1d
'[PriceContext] bitcoin calculation:', { amount: 8352060000,
  adjustedAmount: 83.5206,
  price: 105683,
  fiatValue: 8826707.5698 }
'[PriceContext] solana calculation:', { amount: 6247570000000,
  adjustedAmount: 6247.57,
  price: 148.16,
  fiatValue: 925639.9712 }
[GraphCard] Loading real portfolio data for 1d
[calculatePortfolioHistory] Generating REAL historical data for range: 1d
[PriceService] Fetching portfolio historical data for 1d
[PriceService] Using cached historical data for bitcoin 1d
[PriceService] Using cached historical data for solana 1d
[calculatePortfolioChange] Calculating REAL portfolio change for 1d
[PriceService] Using cached prices
[calculatePortfolioBalance] Calculating current portfolio balance with live prices
[PriceService] Using cached prices
'[AssetRowLayout] Calculating 1d change for bitcoin:', { balance: 8352060000, timeframe: '1d' }
'[PriceContext] Getting 1d value change for bitcoin:', { amount: 8352060000, timeframe: '1d', magnitude: 8 }
[PriceService] Using cached prices
'[AssetRowLayout] Calculating 1d change for solana:', { balance: 6247570000000, timeframe: '1d' }
'[PriceContext] Getting 1d value change for solana:', { amount: 6247570000000, timeframe: '1d', magnitude: 9 }
[PriceService] Using cached prices
[PriceService] Generated 48 portfolio history points
[calculatePortfolioHistory] Generated 48 REAL historical points for 1d
[calculatePortfolioHistory] Value range: 9264717.668809999 - 10198650.811500002
[PriceService] Using cached prices
[calculatePortfolioBalance] bitcoin: 8352060000 -> $8826707.57
[PriceService] Using cached prices
'[AssetRowLayout] 1d change result for bitcoin:', { value: -131016.70232484775,
  percentage: -0.014626114663135282,
  absoluteValue: 131016.70232484775,
  priceStart: 107251.6753007623,
  priceEnd: 105683 }
'[AssetRowLayout] 1d change result for solana:', { value: -34511.945836634826,
  percentage: -0.03594425551234725,
  absoluteValue: 34511.945836634826,
  priceStart: 153.684059088035,
  priceEnd: 148.16 }
'[calculatePortfolioChange] 1d change for bitcoin:', { currentValue: 8826707.5698,
  valueChange: -131016.70232484775,
  percentage: -0.014626114663135282 }
[PriceService] Using cached prices
[calculatePortfolioBalance] solana: 6247570000000 -> $925639.97
[calculatePortfolioBalance] Total portfolio balance: $9752347.54
[PriceService] Using cached prices
'[calculatePortfolioChange] 1d change for solana:', { currentValue: 925639.9712,
  valueChange: -34511.945836634826,
  percentage: -0.03594425551234725 }
'[calculatePortfolioChange] Total 1d change:', { totalCurrentValue: 9752347.541,
  totalChange: -165528.6481614826,
  changePercentage: -0.016973210549109427 }
'[GraphCard] Loaded real data:', { historyPoints: 48,
  currentBalance: 9752347.541,
  change: { value: -165528.6481614826, percentage: -0.016973210549109427 } }
Unrecognized font family 'Inter-Medium' 

---

_**Assistant**_

<think><details><summary>Thought Process</summary>Let me analyze the logs to understand what's happening with the 1d timeframe and why the line graphs are appearing too straight with slight drops.

Looking at the logs, I can see several key issues:

1. **24h vs 1d confusion**: The user is correct that 24h and 1d should be the same timeframe. Looking at the code, I see in PriceService.ts:

```typescript
const calculate24hValueChange = useCallback(async (
    cryptoId: SupportedCryptoId,
    amount: BigNumber,
    magnitude: number = 8
  ): Promise<ValueChangeData> => {
    try {
      return await PriceService.calculate24hValueChange(cryptoId, amount, magnitude);
    }
```

And in the GraphCard, there's logic that checks:
```typescript
if (timeframe === '1d') {
  return this.calculate24hValueChange(cryptoId, amount, decimals);
}
```

But then there's also separate handling for 1d historical data.

2. **API failures causing fallback data**: From the logs, I can see:
```
[PriceService] coingecko historical data failed:', [Error: CoinGecko historical API error: 401]
[PriceService] All providers failed for bitcoin 1d, generating fallback data
[PriceService] Generating fallback historical data for bitcoin 1d at price 105683
[PriceService] Generated 24 fallback points for bitcoin 1d
[PriceService] Price range: 100398.85 - 110507.5
```

The fallback data generation is creating very conservative, straight-line data that barely fluctuates.

3. **Inconsistent data sources**: For 1d, it's using fallback generated data, but for calculating the percentage changes, it's using the live API 24h change data:

```


[AssetRowLayout] 1d change result for bitcoin:', { value: -131016.70232484775,
  percentage: -0.014626114663135282,
  absoluteValue: 131016.70232484775,
  priceStart: 107251.6753007623,
  priceEnd: 105683 }
```

The percentage (-1.46%) matches the 24h change from the API, but the historical graph data is generated separately.

I notice the 1d change shows a price drop from 107,251 to 105,683, which aligns with the API's 24-hour change calculation. However, the fallback historical data generation creates an unnaturally smooth line with minimal price variation, explaining the overly straight graph appearance.

The core issue stems from inconsistent data handling between the 24-hour change calculation and the 1-day historical data generation, resulting in misleading visual representations of price movement.

The volatility factor calculation intentionally dampens price fluctuations, with bitcoin's base volatility set extremely low at 0.008, further suppressing realistic price dynamics. This conservative approach means generated graphs fail to capture typical intraday market movements.

To resolve this, I'll need to align data sources and adjust the volatility generation to more accurately reflect real market behavior.

Key areas requiring modification include price service methods for generating fallback data, ensuring consistent data handling between graph rendering and percentage change calculations. The goal is creating a unified approach that maintains data integrity while representing more authentic price variations across different timeframes.

Specific implementation will involve carefully recalibrating volatility factors, synchronizing data sources, and implementing more nuanced fallback generation strategies that mirror actual market volatility patterns.</details></think>

---

Looking at the logs, I can identify several critical issues causing the 1d timeframe problems:

## Root Cause Analysis

1. **API Failures Triggering Fallback Data**: The logs show API failures for 1d historical data:
   ```
   [PriceService] coingecko historical data failed: CoinGecko historical API error: 401
   [PriceService] All providers failed for bitcoin 1d, generating fallback data
   ```

2. **Inconsistent Data Sources**: For 1d timeframe, the system is using:
   - **Live API data** for delta calculations (showing -1.46% change)
   - **Generated fallback data** for the graph (creating straight lines)

3. **Over-Conservative Fallback Generation**: The volatility factors are too small, creating near-flat lines

4. **24h vs 1d Confusion**: The code treats them differently when they should be identical

Let me fix these issues by updating the relevant components:

---



---



---

